document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".content-gate-block").forEach((e=>{(function(){const e=`; ${document.cookie}`.split("; content_gate_access=");if(2===e.length)return e.pop().split(";").shift()})()||function(e){const t=e.querySelector(".content-gate-content"),n=e.querySelector(".content-gate-form");t&&n&&(t.style.display="none",n.style.display="block")}(e);const t=e.querySelector(".content-gate-form-fields");if(t&&window.contentGateData?.recaptchaSiteKey){const e=document.createElement("div");e.className="g-recaptcha",e.dataset.sitekey=window.contentGateData.recaptchaSiteKey,t.insertBefore(e,t.querySelector("button"))}t?.addEventListener("submit",(async function(n){n.preventDefault();const o=new FormData(t);o.append("action","content_gate_submit"),o.append("content_gate_nonce",window.contentGateData?.nonce||"");try{const t=await fetch(window.ajaxurl,{method:"POST",body:o,credentials:"same-origin"}),n=await t.json();n.success?(function(e){const t=e.querySelector(".content-gate-content"),n=e.querySelector(".content-gate-form");t&&n&&(t.style.display="block",n.style.display="none")}(e),window.grecaptcha&&grecaptcha.reset()):alert(n.data||"An error occurred. Please try again.")}catch(e){console.error("Content Gate submission error:",e),alert("An error occurred. Please try again.")}}))}))}));